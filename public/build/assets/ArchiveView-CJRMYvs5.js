import{q as N,u as v,j as e,f as p}from"./ConfirmationContext-B_AdGWYB.js";import{T as F}from"./index-Dh5Cl-3c.js";import{B as w}from"./BlogPost-lVtufS3h.js";import{H as y}from"./Header-Cfc4JRbS.js";import{S as _,Y as P}from"./YearFilterComponent-BuJctp8g.js";import{N as $}from"./Navbar-DgVBYgo-.js";import"./axiosInstance-CnLbWm-t.js";import"react-helmet-async";import"react-markdown";import"./Spinner4-CoQArQG_.js";function H(){var h;const{props:g}=N(),{theme:u}=v(),{posts:c,allPosts:d,topics:i,currentTopic:t,currentPage:r,hasMore:f,total:j,archiveYear:l,auth:n}=g;(h=n==null?void 0:n.user)==null||h.is_admin;const m=s=>{const a=new URLSearchParams;t&&a.append("topic",t),a.append("page",(s+1).toString()),p.get(`/archives/${l}`,Object.fromEntries(a))},x=s=>{const a=new URLSearchParams;s&&a.append("topic",s),p.get(`/archives/${l}`,Object.fromEntries(a))};return e.jsx("div",{className:`min-h-160 ${u}`,children:e.jsxs("div",{className:"min-h-160 bg-[var(--bg-primary)] text-[var(--text-primary)]",children:[e.jsx($,{}),e.jsx(y,{}),e.jsx("main",{className:"!p-4 md:!p-8 !gap-1",children:e.jsxs("div",{className:"w-full !mx-auto flex flex-col lg:flex-row md:!gap-10 xl:!gap-18",children:[e.jsx("aside",{className:"w-full lg:!w-120 lg:!ml-50 !mb-8 lg:!mb-0",children:e.jsxs("div",{className:"lg:sticky lg:top-24 !space-y-4 md:!space-y-6 w-full lg:!w-80 xl:!w-120",children:[e.jsxs("div",{className:"rounded-lg bg-[#5800FF]/10 !p-4",children:[e.jsx("h3",{className:"font-semibold !mb-2",children:"About"}),e.jsxs("p",{className:"opacity-80",children:["Viewing posts from ",e.jsx("strong",{children:l}),". Browse other years or topics to explore more."]})]}),e.jsxs("div",{className:"rounded-lg bg-[#5800FF]/10 !p-4",children:[e.jsx("h3",{className:"font-semibold !mb-2",children:"Topics"}),e.jsxs("ul",{className:"!space-y-1",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>x(null),className:`w-full text-left !px-2 !py-1 rounded ${t===null?"bg-[#5800FF] text-white":"hover:bg-[#5800FF]/20"}`,children:"All Topics"})}),i&&i.length>0?i.map(s=>e.jsx("li",{children:e.jsx("button",{onClick:()=>x(s),className:`w-full text-left !px-2 !py-1 rounded ${t===s?"bg-[#5800FF] text-white":"hover:bg-[#5800FF]/20"}`,children:s})},s)):e.jsx("li",{className:"!ml-2",children:"No topics available"})]})]}),e.jsxs("div",{className:"rounded-lg bg-[#5800FF]/10 !p-4",children:[e.jsx(_,{posts:d}),e.jsx(P,{posts:d})]})]})}),e.jsx("div",{className:"flex-1 flex flex-col items-center w-full",children:e.jsxs("div",{className:"!space-y-8",children:[e.jsxs("h2",{className:"text-2xl font-bold w-full !mb-10 xl:!ml-10 text-center lg:text-left xl:!mt-6",children:["Archive â€” Posts from ",l,":"]}),c.data.length===0?e.jsxs("div",{className:"text-center opacity-70 !mt-30",children:["No blog posts found for ",l,"."]}):e.jsxs(e.Fragment,{children:[c.data.map(s=>{const a=s.image_url?`${window.location.origin}/${s.image_url}`:null,o=s.slug&&s.slug!=="slug"?s.slug:void 0,b=s.author&&s.author!=="author"?s.author:"Unknown";return e.jsx("div",{className:"relative",children:e.jsx(w,{post:{title:s.title,content:s.content,topic:s.topic,id:s.id,_id:s.id.toString(),image_url:a,slug:o,author:b,created_at:s.created_at,updated_at:s.updated_at||s.created_at,postUrl:o?`/post/${o}`:`/post/${s.id}`}})},s.id)}),e.jsxs("div",{className:"flex justify-center items-center gap-10 !mt-18",children:[e.jsx("button",{onClick:()=>m(r-1),disabled:r===0,className:"!px-4 !py-2 bg-[#5800FF] text-white rounded hover:bg-[#E900FF] disabled:opacity-50 transition-colors",children:"Previous"}),e.jsxs("span",{children:["Page ",r+1," of ",Math.ceil(j/6)]}),e.jsx("button",{onClick:()=>m(r+1),disabled:!f,className:"!px-4 !py-2 bg-[#5800FF] text-white rounded hover:bg-[#E900FF] disabled:opacity-50 transition-colors",children:"Next"})]})]})]})})]})}),e.jsx(F,{})]})})}export{H as default};
