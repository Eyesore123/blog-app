import{q as f,r as u,u as y,j as e,f as m,b as w}from"./ConfirmationContext-DK_-GFGj.js";import{I as c}from"./input-error-CB2YCpRl.js";import{g as x,N}from"./Navbar-BhEc0PNi.js";import{S as v}from"./Spinner4-DhgEGjYq.js";import{H as S}from"./Header-gtXVReKQ.js";import"./axiosInstance-Hn551h6z.js";function I(s){localStorage.setItem("auth_token",s)}function F({flow:s,setFlow:d}){const{errors:a}=f().props,[t,n]=u.useState(!1),{theme:o}=y(),p=r=>{var l;const i=((l=r==null?void 0:r.props)==null?void 0:l.auth_token)||null;i&&I(i),m.get("/")};async function h(){n(!0),await x(),m.post("/anonymous-login",{},{onFinish:()=>n(!1),onSuccess:r=>p(r)})}async function b(r){r.preventDefault(),n(!0),await x();const i=r.target;if(!(i instanceof HTMLFormElement)){console.error("handleSubmit: target is not a form"),n(!1);return}const l=new FormData(i),g=s==="signIn"?"/login":"/register";m.post(g,l,{forceFormData:!0,onFinish:()=>n(!1),onSuccess:j=>p(j)})}return e.jsx("div",{className:"w-full !mt-10 !mb-10",children:t?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"w-full flex justify-center items-center !mb-10 font-bold",children:"Signing in..."}),e.jsx("div",{className:"flex justify-center !py-10 !mb-20",children:e.jsx(v,{})})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-2xl font-bold !mb-8 text-center",children:s==="signIn"?"Sign In to Joni's Blog":"Sign Up for Joni's Blog"}),e.jsxs("form",{className:"flex flex-col gap-4 justify-center items-center",onSubmit:b,children:[e.jsx("input",{className:"input-field border border-white !p-2 !w-60 md:!w-80",style:{borderColor:o==="dark"?"#fff":"#000"},type:"email",name:"email",placeholder:"Email",required:!0,disabled:t}),e.jsx(c,{message:a.email}),s==="signUp"&&e.jsxs("div",{className:"input-container",children:[e.jsx("input",{className:"input-field border border-white !p-2 !w-60 md:!w-80",style:{borderColor:o==="dark"?"#fff":"#000"},type:"text",name:"name",placeholder:"Name",required:!0,disabled:t}),e.jsx(c,{message:a.name})]}),e.jsxs("div",{className:"input-container",children:[e.jsx("input",{className:"input-field border border-white !p-2 !w-60 md:!w-80",style:{borderColor:o==="dark"?"#fff":"#000"},type:"password",name:"password",placeholder:"Password",required:!0,disabled:t}),e.jsx(c,{message:a.password})]}),s==="signUp"&&e.jsxs("div",{className:"input-container",children:[e.jsx("input",{className:"input-field border border-white !p-2 !w-60 md:!w-80",style:{borderColor:o==="dark"?"#fff":"#000"},type:"password",name:"password_confirmation",placeholder:"Confirm Password",required:!0,disabled:t}),e.jsx(c,{message:a.password_confirmation})]}),e.jsx("div",{className:"text-sm text-center !mb-4",children:s==="signIn"&&e.jsx("a",{href:"/forgot-password",className:"text-blue-600 font-semibold hover:underline",children:"Forgot your password?"})}),e.jsx("button",{className:"bg-[#5800FF] hover:bg-[#4600cc] text-white font-semibold !py-2 !px-6 rounded transition disabled:opacity-50",type:"submit",disabled:t,children:s==="signIn"?"Sign in":"Sign up"})]}),e.jsxs("div",{className:"flex items-center justify-center !my-3",children:[e.jsx("hr",{className:"!my-8 grow"}),e.jsx("span",{className:"!mx-4 text-slate-400",children:"or"}),e.jsx("hr",{className:"!my-8 grow"})]}),e.jsx("div",{className:"button-container flex w-full items-center justify-center",children:e.jsx("button",{className:"bg-[#5800FF] hover:bg-[#4600cc] text-white font-semibold !py-2 !px-6 rounded transition disabled:opacity-50",type:"button",onClick:h,disabled:t,children:"Continue without account"})}),e.jsxs("div",{className:"text-center text-slate-600 !mt-4",children:[e.jsx("span",{children:s==="signIn"?"Don't have an account? ":"Already have an account? "}),e.jsx("button",{type:"button",className:"text-blue-500 cursor-pointer",onClick:()=>d(s==="signIn"?"signUp":"signIn"),disabled:t,children:s==="signIn"?"Sign up instead":"Sign in instead"})]})]})})}const T=()=>{const[s,d]=u.useState("signIn"),{props:a}=f(),t=a.status,{showAlert:n}=w();return u.useEffect(()=>{t&&n(t,"success")},[t,n]),e.jsxs(e.Fragment,{children:[e.jsx(N,{}),e.jsx(S,{}),e.jsx("div",{className:"min-h-160 flex items-center justify-center bg-[var(--bg-primary)] text-[var(--text-primary)]",children:e.jsx("div",{className:"w-full max-w-md !pb-8 !pr-8 !pl-8",children:e.jsx("div",{className:"bg-[var(--color-primary)]/10 rounded-lg !p-8",children:e.jsx(F,{flow:s,setFlow:d})})})})]})};export{T as default};
