import{j as e,f as p}from"./axiosInstance-B60J37ny.js";import{r as f}from"./vendor-CfxRerCp.js";function h(r){return r.toLowerCase().replace(/[\p{P}$+<=>^`|~]/gu,"").replace(/\s+/g," ").trim()}function j(r,a){const l=h(a);if(!l)return 0;const c=h(r.title),t=h(r.topic);if(c===l||t===l)return 100;if(c.startsWith(l)||t.startsWith(l))return 80;const d=c.split(" "),o=t.split(" ");return d.some(m=>m.startsWith(l))||o.some(m=>m.startsWith(l))?70:c.includes(l)||t.includes(l)?50:0}const F=({posts:r=[]})=>{const[a,l]=f.useState(""),c=a.length===0?[]:r.map(t=>({post:t,score:j(t,a)})).filter(({score:t})=>t>0).sort((t,d)=>d.score-t.score).map(({post:t})=>t);return e.jsxs("div",{className:"rounded-lg !pb-4",children:[e.jsx("h3",{className:"font-semibold !mb-2",children:"Search Posts"}),e.jsx("input",{type:"text",value:a,onChange:t=>l(t.target.value),placeholder:"Search by title or topic",className:"w-50 md:w-70 !p-2 rounded border border-[#5800FF]/30 focus:outline-none focus:ring-2 focus:ring-[#5800FF]/50"}),a.length>0&&e.jsx("ul",{className:"!space-y-1 max-h-48 overflow-y-auto",children:c.length>0?c.map(t=>e.jsx("li",{children:e.jsxs("button",{onClick:()=>p.visit(`/post/${t.id}`),className:"w-full text-left !px-2 !py-1 rounded hover:bg-[#5800FF]/20",children:[e.jsx("span",{className:"font-medium",children:t.title}),e.jsx("span",{className:"text-xs opacity-60 block",children:t.topic})]})},t.id)):e.jsx("li",{className:"text-sm opacity-60 italic !mt-4 !ml-2",children:"No matches found"})})]})},y=({posts:r=[]})=>{const a=new Date().getFullYear().toString(),[l,c]=f.useState(a),[t,d]=f.useState(null),o=r.reduce((s,n)=>{const i=new Date(n.created_at),u=i.getFullYear().toString(),x=i.toLocaleString("en-US",{month:"long"});return s[u]||(s[u]={}),s[u][x]||(s[u][x]=[]),s[u][x].push(n),s},{}),m=Object.keys(o).sort((s,n)=>Number(n)-Number(s)),b=["January","February","March","April","May","June","July","August","September","October","November","December"];return e.jsxs("div",{className:"rounded-lg !pb-4 !mt-8",children:[e.jsx("h3",{className:"font-semibold !mb-2",children:"All Posts"}),e.jsxs("ul",{className:"!space-y-1",children:[e.jsx("li",{children:e.jsxs("button",{onClick:()=>c(null),className:`w-full text-left !px-2 !py-1 rounded hover:bg-[#5800FF]/20 ${l===null?"bg-[#5800FF] font-semibold text-white":""}`,children:[e.jsx("span",{className:"font-medium",children:"All"}),e.jsxs("span",{className:"text-xs opacity-60 !ml-2",children:["(",r.length,")"]})]})},"all"),m.map(s=>e.jsxs("li",{children:[e.jsxs("button",{onClick:()=>c(l===s?null:s),className:`w-full text-left !px-2 !py-1 rounded hover:bg-[#5800FF]/20 ${l===s?"bg-[#5800FF] font-semibold text-white":""}`,children:[e.jsx("span",{className:"font-medium",children:s}),e.jsxs("span",{className:"text-xs opacity-60 !ml-2",children:["(",Object.values(o[s]).flat().length,")"]})]}),l===s&&e.jsx("ul",{className:"!ml-4 !mt-2 !space-y-1",children:Object.keys(o[s]).sort((n,i)=>b.indexOf(n)-b.indexOf(i)).map(n=>e.jsxs("li",{children:[e.jsxs("button",{onClick:()=>d(t===n?null:n),className:`w-full text-left !px-2 !py-1 rounded hover:bg-[#5800FF]/20 ${t===n?"bg-[#5800FF] font-semibold text-white":""}`,children:[e.jsx("span",{className:"font-medium",children:n}),e.jsxs("span",{className:"text-xs opacity-60 !ml-2",children:["(",o[s][n].length,")"]})]}),t===n&&e.jsx("ul",{className:"!ml-4 !mt-2 space-y-1",children:o[s][n].map(i=>e.jsx("li",{children:e.jsxs("button",{onClick:()=>p.visit(`/post/${i.id}`),className:"w-full text-left !px-2 !py-1 rounded hover:bg-[#5800FF]/20",children:[e.jsx("span",{className:"font-medium",children:i.title}),e.jsx("span",{className:"text-xs opacity-60 block",children:i.topic})]})},i.id))})]},n))})]},s))]}),l===null&&e.jsx("ul",{className:"!ml-4 !mt-2 space-y-1",children:r.map(s=>e.jsx("li",{children:e.jsxs("button",{onClick:()=>p.visit(`/post/${s.id}`),className:"w-full text-left !px-2 !py-1 rounded hover:bg-[#5800FF]/20",children:[e.jsx("span",{className:"font-medium",children:s.title}),e.jsx("span",{className:"text-xs opacity-60 block",children:s.topic})]})},s.id))})]})};export{F as S,y as Y};
