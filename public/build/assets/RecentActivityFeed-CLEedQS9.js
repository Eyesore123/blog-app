import{j as e}from"./ConfirmationContext-BgD69WF4.js";import{R as h,r as s}from"./vendor-CfxRerCp.js";const x=()=>{const[n,l]=s.useState([]),[r,i]=s.useState(!0),[o,p]=s.useState(!0),[d,m]=s.useState(!1);s.useEffect(()=>{const t=new AbortController;return(async()=>{try{const f=await(await fetch("https://blog-app-production-16c2.up.railway.app/api/recent-activity",{signal:t.signal})).json();l(f.slice(0,9))}catch(c){c.name!=="AbortError"&&console.error(c)}finally{i(!1)}})(),()=>{t.abort()}},[]),s.useEffect(()=>{r||p(!1)},[r]),s.useEffect(()=>{if(o&&r){const t=setTimeout(()=>m(!0),500);return()=>clearTimeout(t)}},[o,r]);const u=()=>e.jsxs("div",{className:"animate-pulse !px-2 !py-1 rounded bg-gray-800",children:[e.jsx("div",{className:"h-4 bg-gray-700 rounded w-3/4 mb-1"}),e.jsx("div",{className:"h-3 bg-gray-700 rounded w-1/3"})]});return e.jsxs("div",{className:"rounded-lg !pb-4 !mt-6",children:[e.jsx("h3",{className:"font-semibold !mb-2",children:"Recent Activity"}),o&&r&&d?e.jsx("ul",{className:"!space-y-1",children:[...Array(3)].map((t,a)=>e.jsx("li",{children:e.jsx(u,{})},a))}):n.length===0?e.jsx("p",{className:"text-sm opacity-60 italic",children:"No recent activity."}):e.jsx("ul",{className:"!space-y-1 max-h-96 overflow-y-auto pr-1",children:n.map((t,a)=>e.jsx("li",{children:e.jsxs("a",{href:t.type==="post"?t.url:t.postUrl||"#",target:"_blank",rel:"noopener noreferrer",className:"block w-full text-left !px-2 !py-1 rounded hover:bg-[#5800FF]/20",children:[e.jsx("span",{className:"font-medium",children:t.type==="post"?`ğŸ“ New post: ${t.title}`:`ğŸ’¬ New comment to: ${t.postTitle||"unknown post"}`}),e.jsx("span",{className:"text-xs opacity-60 block",children:t.createdAt})]})},a))})]})},y=h.memo(x);export{y as R};
