import{j as t,f as h}from"./axiosInstance-B60J37ny.js";import{R as x,r as s}from"./vendor-CfxRerCp.js";const j=()=>{const[l,c]=s.useState([]),[o,i]=s.useState(!0),[n,m]=s.useState(!0),[d,p]=s.useState(!1);s.useEffect(()=>{const e=new AbortController;return(async()=>{try{const f=await(await fetch("https://blog.joniputkinen.com/api/recent-activity",{signal:e.signal})).json();c(f.slice(0,9))}catch(r){r.name!=="AbortError"&&console.error(r)}finally{i(!1)}})(),()=>{e.abort()}},[]),s.useEffect(()=>{o||m(!1)},[o]),s.useEffect(()=>{if(n&&o){const e=setTimeout(()=>p(!0),500);return()=>clearTimeout(e)}},[n,o]);const u=()=>t.jsxs("div",{className:"animate-pulse !px-2 !py-1 rounded bg-gray-800",children:[t.jsx("div",{className:"h-4 bg-gray-700 rounded w-3/4 mb-1"}),t.jsx("div",{className:"h-3 bg-gray-700 rounded w-1/3"})]});return t.jsxs("div",{className:"rounded-lg !pb-4 !mt-6",children:[t.jsx("h3",{className:"font-semibold !mb-2",children:"Recent Activity"}),n&&o&&d?t.jsx("ul",{className:"!space-y-1",children:[...Array(3)].map((e,a)=>t.jsx("li",{children:t.jsx(u,{})},a))}):l.length===0?t.jsx("p",{className:"text-sm opacity-60 italic",children:"No recent activity."}):t.jsx("ul",{className:"!space-y-1 max-h-96 overflow-y-auto pr-1",children:l.map((e,a)=>t.jsx("li",{children:t.jsxs("a",{href:e.type==="post"?e.url:e.postUrl||"#",onClick:r=>{r.preventDefault(),h.visit(e.type==="post"?e.url:e.postUrl||"#"),window.scrollTo({top:0,behavior:"smooth"})},className:"block w-full text-left !px-2 !py-1 rounded hover:bg-[#5800FF]/20",children:[t.jsx("span",{className:"font-medium",children:e.type==="post"?`ğŸ“ New post: ${e.title}`:`ğŸ’¬ New comment to: ${e.postTitle||"unknown post"}`}),t.jsx("span",{className:"text-xs opacity-60 block",children:e.createdAt})]})},a))})]})},w=x.memo(j);export{w as R};
