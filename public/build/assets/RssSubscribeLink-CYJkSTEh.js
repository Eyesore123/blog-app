import{r as t,j as e,f as d}from"./ConfirmationContext-B_AdGWYB.js";import{a as m}from"./axiosInstance-CnLbWm-t.js";const h=()=>{const[r,l]=t.useState([]),[n,o]=t.useState(!0),[i,s]=t.useState(null);return t.useEffect(()=>{async function a(){try{const c=await m.get("/api/archives/years");if(c.data&&Array.isArray(c.data.years))l(c.data.years);else throw new Error("Invalid response format")}catch(c){console.error("Failed to fetch years:",c),s("Failed to load archives. Please try again later.")}finally{o(!1)}}a()},[]),e.jsxs("div",{className:"rounded-lg !mt-6 !pb-4",children:[e.jsx("h3",{className:"font-semibold !mb-2",children:"Archives"}),n?e.jsx("p",{className:"text-sm opacity-60 italic",children:"Loading..."}):i?e.jsx("p",{className:"text-sm text-red-500 italic",children:i}):e.jsx("ul",{className:"!space-y-1 max-h-48 overflow-y-auto",children:r.length>0?r.map(a=>e.jsx("li",{children:e.jsx("button",{onClick:()=>d.visit(`/archives/${a}`),className:"w-full text-left !px-2 !py-1 rounded hover:bg-[#5800FF]/20",children:e.jsx("span",{className:"font-medium",children:a})})},a)):e.jsx("li",{className:"text-sm opacity-60 italic",children:"No archives available"})})]})},f=()=>{const[r,l]=t.useState([]),[n,o]=t.useState(!0);t.useEffect(()=>{fetch("https://blog-app-production-16c2.up.railway.app/api/recent-activity").then(s=>s.json()).then(s=>{l(s.slice(0,9)),o(!1)}).catch(s=>{console.error(s),o(!1)})},[]);const i=()=>e.jsxs("div",{className:"animate-pulse !px-2 !py-1 rounded bg-gray-800",children:[e.jsx("div",{className:"h-4 bg-gray-700 rounded w-3/4 mb-1"}),e.jsx("div",{className:"h-3 bg-gray-700 rounded w-1/3"})]});return e.jsxs("div",{className:"rounded-lg !pb-4 !mt-6",children:[e.jsx("h3",{className:"font-semibold !mb-2",children:"Recent Activity"}),n?e.jsx("ul",{className:"!space-y-1",children:[...Array(3)].map((s,a)=>e.jsx("li",{children:e.jsx(i,{})},a))}):r.length===0?e.jsx("p",{className:"text-sm opacity-60 italic",children:"No recent activity."}):e.jsx("ul",{className:"!space-y-1 max-h-100 overflow-y-auto",children:r.map((s,a)=>e.jsx("li",{children:s.type==="post"?e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"block w-full text-left !px-2 !py-1 rounded hover:bg-[#5800FF]/20",children:[e.jsxs("span",{className:"font-medium",children:["📝 New post: ",s.title]}),e.jsx("span",{className:"text-xs opacity-60 block",children:s.createdAt})]}):e.jsxs("a",{href:s.postUrl||"#",target:"_blank",rel:"noopener noreferrer",className:"block w-full text-left !px-2 !py-1 rounded hover:bg-[#5800FF]/20",children:[e.jsxs("span",{className:"font-medium",children:["💬 New comment to: ",s.postTitle&&`${s.postTitle}`]}),e.jsx("span",{className:"text-xs opacity-60 block",children:s.createdAt})]})},a))})]})};function u(){const[r,l]=t.useState(!1),n=`${window.location.origin}/feed`,o=()=>{navigator.clipboard.writeText(n),l(!0),setTimeout(()=>l(!1),2e3)};return e.jsxs("div",{className:"rounded-lg !mt-6 !pb-4",children:[e.jsx("h3",{className:"font-semibold !mb-2",children:"RSS Feed"}),e.jsxs("div",{className:"!mt-4 flex flex-col gap-2",children:[e.jsxs("a",{href:"/feed",target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-[#5800FF] hover:text-[#E900FF] transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4.26 17.52a2.74 2.74 0 105.48 0 2.74 2.74 0 00-5.48 0zm-2.5 5.5h2a20 20 0 0120-20v-2A22 22 0 001.76 23.02zm6.99 0h2a13 13 0 0113-13v-2a15 15 0 00-15 15z"})})," Subscribe via RSS"]}),e.jsx("button",{onClick:o,className:"flex items-center !w-50 md:!w-70 !px-3 !py-1 border border-[#5800FF] text-[#5800FF] hover:text-[#E900FF] transition-colors rounded hover:bg-[#5800FF]/10",children:"Copy RSS Link"}),r&&e.jsx("span",{className:"text-sm text-green-500",children:"Copied!"})]})]})}export{h as A,u as R,f as a};
