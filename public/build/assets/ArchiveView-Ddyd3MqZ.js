import{q as k,u as E,j as e,f as m}from"./ConfirmationContext-BgD69WF4.js";import{T as _}from"./index-Bgz36SJa.js";import{B as $}from"./BlogPost-JX0jJTsS.js";import{H as S}from"./Header-Bo__bH6N.js";import{S as A,Y as M}from"./YearFilterComponent-v280wgLX.js";import{T as U}from"./Tags-aKyd_0b2.js";import{N as L}from"./Navbar-3pRjB-Lg.js";import{r as x}from"./vendor-CfxRerCp.js";import"./axiosInstance-XGWuhqFT.js";import"./Spinner4-BBfDOIyg.js";import"./index-DHe08Kkl.js";function G(){var f;const{props:j}=k(),{theme:p}=E(),[v,F]=x.useState([]),{posts:g,allPosts:h,topics:c,currentTopic:n,currentPage:a,hasMore:N,total:o,archiveYear:l,auth:d}=j;(f=d==null?void 0:d.user)==null||f.is_admin;const[u,w]=x.useState(a+1);x.useEffect(()=>{(async()=>{const r=await(await fetch("/api/tags")).json();F(r)})()},[]);const i=t=>{const s=new URLSearchParams;n&&s.append("topic",n),s.append("page",(t+1).toString()),m.get(`/archives/${l}`,Object.fromEntries(s))},b=t=>{const s=new URLSearchParams;t&&s.append("topic",t),m.get(`/archives/${l}`,Object.fromEntries(s))},y=()=>{i(0)},T=()=>{i(Math.ceil(o/6)-1)},C=t=>{if(t.key==="Enter"){const s=u;s>=1&&s<=Math.ceil(o/6)&&i(s-1)}};return e.jsx("div",{className:`min-h-160 ${p}`,children:e.jsxs("div",{className:"min-h-160 bg-[var(--bg-primary)] text-[var(--text-primary)]",children:[e.jsx(L,{}),e.jsx(S,{}),e.jsx("main",{className:"!p-4 md:!p-8 !gap-1",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 md:gap-6 xl:gap-10 custom-2xl-gap",children:[e.jsx("aside",{className:"hidden lg:block w-full md:!w-2/3 xl:!w-2/3 xl:!ml-20 2xl:!ml-30 xl:max-w-120 xl:!mr-10 !mb-8 lg:!mb-0 mx-auto",children:e.jsxs("div",{className:"lg:top-24 !space-y-4 md:!space-y-6 w-full lg:!w-80 xl:!w-120",children:[e.jsxs("div",{className:"rounded-lg bg-[#5800FF]/10 !p-4 2xl:!pl-6",children:[e.jsx("h3",{className:"font-semibold !mb-2",children:"About"}),e.jsxs("p",{className:"opacity-80",children:["Viewing posts from ",e.jsx("strong",{children:l}),". Browse other years or topics to explore more."]})]}),e.jsxs("div",{className:"rounded-lg bg-[#5800FF]/10 !p-4 2xl:!pl-6 ",children:[e.jsx("h3",{className:"font-semibold !mb-2",children:"Topics"}),e.jsxs("ul",{className:"!space-y-1",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>b(null),className:`w-full text-left !px-2 !py-1 rounded ${n===null?"bg-[#5800FF] text-white":"hover:bg-[#5800FF]/20"}`,children:"All Topics"})}),c&&c.length>0?c.map(t=>e.jsx("li",{children:e.jsx("button",{onClick:()=>b(t),className:`w-full text-left !px-2 !py-1 rounded ${n===t?"bg-[#5800FF] text-white":"hover:bg-[#5800FF]/20"}`,children:t})},t)):e.jsx("li",{className:"!ml-2",children:"No topics available"})]})]}),e.jsxs("div",{className:"rounded-lg bg-[#5800FF]/10 !p-4 2xl:!pl-6",children:[e.jsx(A,{posts:h}),e.jsx(M,{posts:h}),e.jsx(U,{tags:v,onTagClick:t=>m.visit(`/posts/tag/${t}`)})]})]})}),e.jsx("div",{className:"flex flex-col items-center w-full lg:-translate-x-14",children:e.jsxs("div",{className:"!space-y-8",children:[e.jsxs("h2",{className:"text-2xl font-bold w-full !mb-10 lg:!ml-20 xl:!ml-42 text-center lg:text-left xl:!mt-6",children:["Archive â€” Posts from ",l,":"]}),g.data.length===0?e.jsxs("div",{className:"text-center opacity-70 !mt-30",children:["No blog posts found for ",l,"."]}):e.jsxs(e.Fragment,{children:[g.data.map(t=>{const s=t.image_url||void 0,r=t.slug&&t.slug!=="slug"?t.slug:void 0,P=t.author&&t.author!=="author"?t.author:"Unknown";return e.jsx("div",{className:"relative",children:e.jsx($,{post:{title:t.title,content:t.content,topic:t.topic,id:t.id,_id:t.id.toString(),image_url:s,slug:r,author:P,created_at:t.created_at,updated_at:t.updated_at||t.created_at,postUrl:r?`/post/${r}`:`/post/${t.id}`}})},t.id)}),e.jsxs("div",{className:"flex justify-center items-center lg:!ml-10 !gap-2 md:!gap-4 !mt-8 md:!mt-18 customdiv",children:[e.jsx("button",{onClick:y,disabled:a===0,className:"paginationbutton !px-3 !py-1 md:!px-4 md:!py-2 bg-[#5800FF] text-white rounded hover:bg-[#E900FF] disabled:opacity-50 transition-colors text-sm md:text-base",children:e.jsx("img",{src:"/first.svg",alt:"First"})}),e.jsx("button",{onClick:()=>i(a-1),disabled:a===0,className:"paginationbutton !px-3 !py-1 md:!px-4 md:!py-2 bg-[#5800FF] text-white rounded hover:bg-[#E900FF] disabled:opacity-50 transition-colors text-sm md:text-base",children:"Previous"}),e.jsxs("span",{className:"text-sm md:text-base",children:["Page ",a+1," of ",Math.ceil(o/6)]}),e.jsx("input",{type:"number",value:u,onChange:t=>w(parseInt(t.target.value)),onKeyDown:C,className:`w-10 md:w-12 !h-8 text-sm !pr-1 md:text-base text-center ${p==="dark"?"bg-primary":"bg-white"} border border-gray-300 rounded`}),e.jsx("button",{onClick:()=>i(a+1),disabled:!N,className:"paginationbutton !px-3 !py-1 md:!px-4 md:!py-2 bg-[#5800FF] text-white rounded hover:bg-[#E900FF] disabled:opacity-50 transition-colors text-sm md:text-base",children:"Next"}),e.jsx("button",{onClick:T,disabled:a===Math.ceil(o/6)-1,className:"paginationbutton !px-3 !py-1 md:!px-4 md:!py-2 bg-[#5800FF] text-white rounded hover:bg-[#E900FF] disabled:opacity-50 transition-colors text-sm md:text-base",children:e.jsx("img",{src:"/last.svg",alt:"Last"})})]})]})]})})]})}),e.jsx(_,{})]})})}export{G as default};
