import{q as g,u as y,j as e,f as u}from"./axiosInstance-B60J37ny.js";import{r as p}from"./vendor-CfxRerCp.js";import{I as o}from"./input-error-DRdowYVP.js";import{g as f,N}from"./app-BZ86fJkl.js";import{S as v}from"./Spinner4-BhOwiG6x.js";import{H as w}from"./Header-DLvWApgL.js";function S(s){localStorage.setItem("auth_token",s)}function I({flow:s,setFlow:l}){const{errors:r}=g().props,[t,a]=p.useState(!1),{theme:i}=y(),x=(n,d)=>{var m;const c=((m=n==null?void 0:n.props)==null?void 0:m.auth_token)||null;c&&(d==="signUp"||S(c)),d==="signUp"&&!n.props.verified&&(l("signIn"),u.visit("/verifyemailnotice",{data:{email:n.props.email}}))},h=async()=>{a(!0),await f(),u.post("/anonymous-login",{},{onFinish:()=>a(!1),onSuccess:n=>x(n,"signIn")})},b=async n=>{n.preventDefault(),a(!0),await f();const d=n.target,c=new FormData(d),m=s==="signIn"?"/login":"/register";u.post(m,c,{forceFormData:!0,onFinish:()=>a(!1),onSuccess:j=>x(j,s)})};return e.jsx("div",{className:"w-full !mt-10 !mb-10",children:t?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"w-full flex justify-center items-center !mb-10 font-bold",children:s==="signIn"?"Signing in...":"Signing up..."}),e.jsx("div",{className:"flex justify-center !py-10 !mb-20",children:e.jsx(v,{})})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-2xl font-bold !mb-8 text-center",children:s==="signIn"?"Sign In to Joni's Blog":"Sign Up for Joni's Blog"}),e.jsxs("form",{onSubmit:b,className:"flex flex-col gap-4 justify-center items-center",children:[s==="signUp"&&e.jsxs("div",{className:"input-container",children:[e.jsx("input",{className:"input-field border border-white !p-2 !w-60 md:!w-80",style:{borderColor:i==="dark"?"#fff":"#000"},type:"text",name:"name",placeholder:"Name",required:!0,disabled:t}),e.jsx(o,{message:r.name})]}),e.jsxs("div",{className:"input-container",children:[e.jsx("input",{className:"input-field border border-white !p-2 !w-60 md:!w-80",style:{borderColor:i==="dark"?"#fff":"#000"},type:"email",name:"email",placeholder:"Email",required:!0,disabled:t}),e.jsx(o,{message:r.email})]}),s==="signUp"&&e.jsxs("div",{className:"flex flex-col items-center !gap-3",children:[e.jsx("label",{htmlFor:"profile_photo",className:"text-sm text-slate-500 italic",children:"Profile photo (optional)"}),e.jsx("input",{id:"profile_photo",name:"profile_photo",type:"file",accept:"image/*",disabled:t,className:`file-input block w-60 md:w-80 border-2 border-dashed rounded-lg !p-2 cursor-pointer bg-transparent hover:bg-slate-50 transition
                    border-gray-400 text-sm text-slate-500 file:!mr-4 file:!py-2 file:!px-4
                    file:rounded-full file:border-0 file:text-sm file:font-semibold
                    file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100`}),e.jsx(o,{message:r.profile_photo})]}),e.jsxs("div",{className:"input-container",children:[e.jsx("input",{className:"input-field border border-white !p-2 !w-60 md:!w-80",style:{borderColor:i==="dark"?"#fff":"#000"},type:"password",name:"password",placeholder:"Password",required:!0,disabled:t}),e.jsx(o,{message:r.password})]}),s==="signUp"&&e.jsxs("div",{className:"input-container",children:[e.jsx("input",{className:"input-field border border-white !p-2 !w-60 md:!w-80",style:{borderColor:i==="dark"?"#fff":"#000"},type:"password",name:"password_confirmation",placeholder:"Confirm Password",required:!0,disabled:t}),e.jsx(o,{message:r.password_confirmation})]}),e.jsx("div",{className:"text-sm text-center !mb-4",children:s==="signIn"&&e.jsx("a",{href:"/forgot-password",className:"text-blue-600 font-semibold hover:underline",children:"Forgot your password?"})}),e.jsx("button",{className:"bg-[#5800FF] hover:bg-[#4600cc] text-white font-semibold !py-2 !px-6 rounded transition disabled:opacity-50",type:"submit",disabled:t,children:s==="signIn"?"Sign in":"Sign up"})]}),e.jsxs("div",{className:"flex items-center justify-center !my-3",children:[e.jsx("hr",{className:"!my-8 grow"}),e.jsx("span",{className:"!mx-4 text-slate-400",children:"or"}),e.jsx("hr",{className:"!my-8 grow"})]}),e.jsx("div",{className:"button-container flex w-full items-center justify-center",children:e.jsx("button",{className:"bg-[#5800FF] hover:bg-[#4600cc] text-white font-semibold !py-2 !px-6 rounded transition disabled:opacity-50",type:"button",onClick:h,disabled:t,children:"Continue without account"})}),e.jsxs("div",{className:"text-center text-slate-600 !mt-4",children:[e.jsx("span",{children:s==="signIn"?"Don't have an account? ":"Already have an account? "}),e.jsx("button",{type:"button",className:"text-blue-500 cursor-pointer",onClick:()=>l(s==="signIn"?"signUp":"signIn"),disabled:t,children:s==="signIn"?"Sign up instead":"Sign in instead"})]})]})})}const D=({successMessage:s})=>{const[l,r]=p.useState("signIn"),[t,a]=p.useState(s||null),{flash:i}=g().props;return p.useEffect(()=>{i.message&&a(i.message)},[i.message]),e.jsxs(e.Fragment,{children:[e.jsx(N,{}),e.jsx(w,{}),e.jsx("div",{className:"min-h-160 flex items-center justify-center bg-[var(--bg-primary)] text-[var(--text-primary)]",children:e.jsxs("div",{className:"w-full max-w-md !pb-8 !pr-8 !pl-8",children:[t&&e.jsx("div",{style:{backgroundColor:"#d4edda",color:"#155724",padding:"12px 20px",marginBottom:"16px",borderRadius:"4px",border:"1px solid #c3e6cb",textAlign:"center",fontWeight:"600",marginTop:"50px"},children:t}),e.jsx("div",{className:"bg-[var(--color-primary)]/10 rounded-lg !p-8",children:e.jsx(I,{flow:l,setFlow:r})})]})})]})};export{D as default};
